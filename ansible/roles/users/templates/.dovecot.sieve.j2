#
# Reference: http://sieve.mozdev.org/reference.html
# To apply changes: sievec .dovecot.sieve .dovecot.sievec
# To test: sieve-test .dovecot.sieve <test email>
#

require [ "regex", "fileinto", "reject" ];

# Top-level domain spam
if address :matches :domain "from"
  [
    "state.co.us"
  ] {
  keep;
  stop;
}
if address :regex :domain "from"
  [
    "\.bid$",
    "\.club$",
    "\.stream$",
    "\.top$",
    "\.trade$",
    "\.us$"
  ] {
  discard;
  stop;
}

if address :matches :domain "from"
  [
    # Citrix
    "citrix.com",
    "citrixemea.com",
    "citrixonline.com",
    "eg-monitoring.com",

    # Retailers
    "freshpair.com",
    "microcenterinsider.com",

    # Other
    "pof.com",
    "thesocialeffect.com"
  ] {
  reject "Reason: Your unsolicited email is not welcome here.";
  stop;
}

if anyof(
    header :contains "X-Spam-Flag" "YES",
    address :matches :domain "from" [
      # Retailers
      "*.express.com"
    ]
  ) {
  fileinto "Junk";
  stop;
}

if address :matches :domain "from"
  [
    # Recruiters
    "altius.us.com",
    "apexsystems.com",
    "artechinfo.com",
    "austinfraser.com",
    "bniselect.it",
    "captevo.com",
    "careerfactorllc.com",
    "ceiamerica.com",
    "bridgeviewit.com",
    "dice.com",
    "dtglobalstaffing.com",
    "ecom-group.com",
    "esharpedge.com",
    "gemresourcing.com",
    "goldstonepartners.com",
    "higherincomejobs.com",
    "idctechnologies.com",
    "infinity-cs.com",
    "innovargroup.com",
    "insightglobal.com",
    "ispace.com",
    "judge.com",
    "jeffersonfrank.com",
    "kaztronix.com",
    "kforce.com",
    "kloudhire.com",
    "ksourceinc.com",
    "mastechdigital.com",
    "mobileprogrammingllc.com",
    "modis.com",
    "moreljobs.com",
    "mypeersource.com",
    "oxfordcorp.com",
    "repherrals.com",
    "repherralz.com",
    "sterling5.com",
    "techtalentlink.com",
    "techusa.net",
    "tekstream.com",
    "teksystems.com",
    "theashgroup.com",
    "theopeneyes.com",
    "thingsprogramming.com"
  ] {
  fileinto "Archive";
  stop;
}
